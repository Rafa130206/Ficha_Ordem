<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Ficha do Personagem</title>
  <link rel="icon" type="image/png" th:href="@{/images/favicon.png}">
  <style>
    body {
        font-family: ui-serif, Georgia, 'Times New Roman', Times, serif;
        margin: 0;
        background: #0b0f14;
        color: #f1f5f9;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .login-container {
        background: #0e141b;
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset;
        width: 100%;
        max-width: 400px;
    }

    .login-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .login-header h1 {
        font-size: 28px;
        margin: 0 0 10px;
        letter-spacing: .3px;
        color: #ffffff;
    }

    .login-header p {
        color: #94a3b8;
        margin: 0;
        font-size: 14px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 8px;
        font-size: 14px;
    }

    .form-group input {
        width: 100%;
        background: #0b0f14;
        border: 1px solid rgba(255,255,255,0.15);
        color: #e5e7eb;
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 16px;
        box-sizing: border-box;
        transition: border-color 0.2s ease;
    }

    .form-group input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-group input::placeholder {
        color: #6b7280;
    }

    .login-button {
        width: 100%;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        border: none;
        color: white;
        padding: 14px 20px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 10px;
    }

    .login-button:hover {
        background: linear-gradient(135deg, #2563eb, #1e40af);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .login-button:active {
        transform: translateY(0);
    }

    .error-message {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #fca5a5;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 14px;
        display: none;
    }

    .error-message.show {
        display: block;
    }

    .success-message {
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.3);
        color: #6ee7b7;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 14px;
        display: none;
    }

    .success-message.show {
        display: block;
    }

    .register-link {
        text-align: center;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }

    .register-link a {
        color: #3b82f6;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s ease;
    }

    .register-link a:hover {
        color: #60a5fa;
    }

    .d20-icon {
        width: 64px;
        height: 64px;
        display: block;
        margin: 0 auto 16px;
        filter: drop-shadow(0 0 6px rgba(59, 130, 246, 0.4));
        transition: transform 0.3s ease, filter 0.3s ease;
    }

    /* Efeito ao passar o mouse */
    .d20-icon:hover {
        transform: rotate(15deg) scale(1.05);
        filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.7));
    }
  </style>
</head>
<body>
<div class="login-container">
  <div class="login-header">
    <img th:src="@{/images/d20.png}" alt="D20" class="d20-icon" />
    <h1>Ficha do Personagem</h1>
    <p>Entre com suas credenciais para acessar sua ficha</p>
  </div>

  <div class="error-message" id="errorMessage" th:if="${error}">
    <span th:text="${error}"></span>
  </div>

  <div class="success-message" id="successMessage" th:if="${success}">
    <span th:text="${success}"></span>
  </div>

  <form th:action="@{/login}" method="post">
    <div class="form-group">
      <label for="username">Email</label>
      <input
              type="text"
              id="username"
              name="username"
              placeholder="Digite seu email"
              required
              autocomplete="username"
      />
    </div>

    <div class="form-group">
      <label for="password">Senha</label>
      <input
              type="password"
              id="password"
              name="password"
              placeholder="Digite sua senha"
              required
              autocomplete="current-password"
      />
    </div>

    <button type="submit" class="login-button">
      Entrar
    </button>
  </form>

  <div class="register-link">
    <p>Não tem uma conta? <a href="/register">Cadastre-se aqui</a></p>
  </div>
</div>

<script>
  // Mostra mensagem de erro se existir
  function showError(message) {
      const errorDiv = document.getElementById('errorMessage');
      if (errorDiv) {
          errorDiv.textContent = message;
          errorDiv.classList.add('show');
          setTimeout(() => {
              errorDiv.classList.remove('show');
          }, 5000);
      }
  }

  // Verifica se há erro na URL
  const urlParams = new URLSearchParams(window.location.search);
  const error = urlParams.get('error');
  if (error) {
      showError('Usuário ou senha inválidos');
  }

  // Foco no primeiro campo
  document.addEventListener('DOMContentLoaded', function() {
      const usernameField = document.getElementById('username');
      if (usernameField) {
          usernameField.focus();
      }
  });
</script>
</body>
</html>
